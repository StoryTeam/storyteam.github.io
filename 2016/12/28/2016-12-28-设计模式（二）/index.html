
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="vqJV77bZM6" />
  
    <title>设计模式（二） | StoryTeam</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="StoryTeam">
    

    <meta name="keywords" content="生活,笔记,经验,分享">
    <meta name="applicable-device" content="pc,mobile">
    <meta name="description" content="导语面向对象设计原则为设计可复用、可扩展、可维护、灵活的软件系统提供了指导性原则，本文分别从设计原则的定义、通俗理解、案例分析三个维度详细讲解了七条设计原则，旨在加深大家对设计原则的理解，提升开发设计能力，早日远离烂代码。">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式（二）">
<meta property="og:url" content="http://StoryTeam.cn/2016/12/28/2016-12-28-设计模式（二）/index.html">
<meta property="og:site_name" content="StoryTeam">
<meta property="og:description" content="导语面向对象设计原则为设计可复用、可扩展、可维护、灵活的软件系统提供了指导性原则，本文分别从设计原则的定义、通俗理解、案例分析三个维度详细讲解了七条设计原则，旨在加深大家对设计原则的理解，提升开发设计能力，早日远离烂代码。">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A31.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A32.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/oc1.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/oc2.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/ls1.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/ls2.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/is1.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/is2.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/cr1.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/cr2.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/LOD1.jpg">
<meta property="og:image" content="http://7xotrj.com1.z0.glb.clouddn.com/LOD2.jpg">
<meta property="og:updated_time" content="2017-01-08T05:50:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="设计模式（二）">
<meta name="twitter:description" content="导语面向对象设计原则为设计可复用、可扩展、可维护、灵活的软件系统提供了指导性原则，本文分别从设计原则的定义、通俗理解、案例分析三个维度详细讲解了七条设计原则，旨在加深大家对设计原则的理解，提升开发设计能力，早日远离烂代码。">
<meta name="twitter:image" content="http://7xotrj.com1.z0.glb.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A31.jpg">

    
    <link rel="alternative" href="/atom.xml" title="StoryTeam" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon_new.ico">
    
    
    <link rel="apple-touch-icon" href="/img/logo_new.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/logo_new.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="StoryTeam">StoryTeam</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		
  <header class="article-info clearfix">
    <h1 itemprop="name">
      
        <a href="/2016/12/28/2016-12-28-设计模式（二）/" target="_blank" title="设计模式（二）" itemprop="url">设计模式（二）</a>
    </h1>
    <p class="article-time">
      <time datetime="2016-12-28T07:43:00.000Z" itemprop="datePublished">2016-12-28</time>
      <span class="toc-text">qing</span>
      <span style="margin-left: 0.5em;"><i class="icon-eye-open"></i> <span class="viewcount"></span></span>
    </p>
  </header>

	<div class="article-content">
		
		<h3 id="导语"><a href="#导语" class="headerlink" title="导语"></a>导语</h3><p>面向对象设计原则为设计可复用、可扩展、可维护、灵活的软件系统提供了指导性原则，本文分别从设计原则的定义、通俗理解、案例分析三个维度详细讲解了七条设计原则，旨在加深大家对设计原则的理解，提升开发设计能力，早日远离烂代码。</p>
<a id="more"></a>
<h3 id="设计原则意义"><a href="#设计原则意义" class="headerlink" title="设计原则意义"></a>设计原则意义</h3><p>面相对象设计的终极目标是希望软件系统具有可复用性、可维护性、可拓展等特性，同时这几个特性也是我们检测软件系统是不是设计得合理的衡量标准。面向对象的设计原则为软件系统的设计提供了指导性的原则。掌握、运用这些规则不仅能设计出优秀的软件系统同时也能提升我们自身的开发设计能力。</p>
<p>罗伯特·C·马丁在21世纪早期引入的记忆术首字母缩略字提出了SOLID（单一功能、开闭原则、里氏替换、接口隔离以及依赖反转），指代了面向对象编程和面向对象设计的五个基本原则。随着程序设计的不断发展，增加了合成复用原则、迪米特法则二个基本原则，接下来详细讲解这七条基本原则：</p>
<ol>
<li>单一职责原则</li>
<li>开放封闭原则</li>
<li>里氏代换原则</li>
<li>依赖倒转原则</li>
<li>接口隔离原则</li>
<li>合成复用原则</li>
<li>迪米特法原则</li>
</ol>
<h3 id="七条设计原则"><a href="#七条设计原则" class="headerlink" title="七条设计原则"></a>七条设计原则</h3><h4 id="单一职责原则-Single-Responsibility-Principle—SRP"><a href="#单一职责原则-Single-Responsibility-Principle—SRP" class="headerlink" title="单一职责原则(Single Responsibility Principle—SRP)"></a>单一职责原则(Single Responsibility Principle—SRP)</h4><p>定义：就一个类而言，应该仅有一个引起它变化的原因<br>通俗的理解就是：一个类如果承担的职责过多，就等于把这些职责耦合在一起，一个职责的变化可能会削弱或者抑制这个类完成其他职责的能力，这种耦合会导致脆弱的设计，它被复用的可能性就很小。因此要将这些职责进行分离，将不同的职责封装在不同的类中，即将不同的变化原因封装在不同的类中，如果多个职责总是同时发生改变则可将它们封装在同一类中。<br>单一职责原则是实现高内聚、低耦合的指导方针。</p>
<h5 id="案例讲解"><a href="#案例讲解" class="headerlink" title="案例讲解"></a>案例讲解</h5><p>开发人员针对某CRM（Customer Relationship Management，客户关系管理）系统中客户信息图形统计模块提出了如图所示初始设计方案：<br>￼<br><img src="http://7xotrj.com1.z0.glb.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A31.jpg" alt=""></p>
<p>在上图中，CustomerDataChart类中的方法说明如下：getConnection()方法用于连接数据库，findCustomers()用于查询所有的客户信息，createChart()用于创建图表，displayChart()用于显示图表。<br>在上图中，CustomerDataChart类承担了太多的职责，既包含与数据库相关的方法，又包含与图表生成和显示相关的方法。如果在其他类中也需要连接数据库或者使用findCustomers()方法查询客户信息，则难以实现代码的重用。无论是修改数据库连接方式还是修改图表显示方式都需要修改该类，它不止一个引起它变化的原因，违背了单一职责原则。因此需要对该类进行拆分，使其满足单一职责原则，类CustomerDataChart可拆分为如下三个类：</p>
<ol>
<li>DBUtil：负责连接数据库，包含数据库连接方法getConnection()；</li>
<li>CustomerDAO：负责操作数据库中的Customer表，包含对Customer表的增删改查等方法，如findCustomers()；</li>
<li>CustomerDataChart：负责图表的生成和显示，包含方法createChart()和displayChart()。<br>现使用单一职责原则对其进行重构: </li>
</ol>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A32.jpg" alt="">￼</p>
<h4 id="开放封闭原则-Open-Closed-Principle—OCP"><a href="#开放封闭原则-Open-Closed-Principle—OCP" class="headerlink" title="开放封闭原则(Open-Closed Principle—OCP)"></a>开放封闭原则(Open-Closed Principle—OCP)</h4><p>定义：是说软件实体（类、模块、函数等等）应该可以扩展，但是不可以修改</p>
<p>开放-封闭原则是面向对象设计的核心所在，遵守这个原则可以收获巨大好处，也就是可维护、可扩展、可复用、灵活性好。</p>
<p>注意事项:开发人员应该仅对程序中呈现出频繁变化的那些部分做出抽象，同时要避免刻意的进行抽象，总之，拒绝不成熟的抽象和抽象本身一样重要。</p>
<h5 id="案例讲解-1"><a href="#案例讲解-1" class="headerlink" title="案例讲解"></a>案例讲解</h5><p>CRM系统可以显示各种类型的图表，如饼状图和柱状图等，为了支持多种图表显示方式，原始设计方案：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/oc1.jpg" alt=""></p>
<p>在ChartDisplay类的display()方法中存在如下代码片段：<br>    if (type.equals(“pie”))<br>    {<br>    PieChart chart = new PieChart();<br>    chart.display();<br>    }<br>    else if (type.equals(“bar”))<br>    {<br>    BarChart chart = new BarChart();<br>    chart.display();<br>    }<br>在该代码中，如果需要增加一个新的图表类，如折线图LineChart，则需要修改ChartDisplay类的display()方法的源代码，增加新的判断逻辑，违反了开闭原则。<br>在本实例中，由于在ChartDisplay类的display()方法中针对每一个图表类编程，因此增加新的图表类不得不修改源代码。可以通过抽象化的方式对系统进行重构，使之增加新的图表类时无须修改源代码，满足开闭原则。具体做法如下：</p>
<ol>
<li>增加一个抽象图表类AbstractChart，将各种具体图表类作为其子类；</li>
<li>ChartDisplay类针对抽象图表类进行编程，由客户端来决定使用哪种具体图表。<br>重构后结构如图所示：</li>
</ol>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/oc2.jpg" alt=""></p>
<h4 id="里氏代换原则-Liskov-Substitution-Principle—LSP"><a href="#里氏代换原则-Liskov-Substitution-Principle—LSP" class="headerlink" title="里氏代换原则(Liskov Substitution Principle—LSP)"></a>里氏代换原则(Liskov Substitution Principle—LSP)</h4><p>定义：子类型必须能够替换掉它们的父类型</p>
<p>里氏代换原则由2008年图灵奖得主、美国第一位计算机科学女博士Barbara Liskov教授和卡内基·梅隆大学Jeannette Wing教授于1994年提出。通俗的理解就是，一个软件实体如果使用的是一个父类的话，那么一定适用于其子类，而且它察觉不出父类对象和子类对象的区别，也就是说，在软件里面，把父类都替换成它的子类，程序的行为没有变化。</p>
<p>里氏代换原则是实现开闭原则的重要方式之一。</p>
<p>注意事项：</p>
<ol>
<li>子类的所有方法必须在父类中声明，或子类必须实现父类中声明的所有方法。根据里氏代换原则，为了保证系统的扩展性，在程序中通常使用父类来进行定义，如果一个方法只存在子类中，在父类中不提供相应的声明，则无法在以父类定义的对象中使用该方法。</li>
<li>我们在运用里氏代换原则时，尽量把父类设计为抽象类或者接口，让子类继承父类或实现父接口，并实现在父类中声明的方法，运行时，子类实例替换父类实例，我们可以很方便地扩展系统的功能，同时无须修改原有子类的代码，增加新的功能可以通过增加一个新的子类来实现。里氏代换原则是开闭原则的具体实现手段之一。<h5 id="案例讲解-2"><a href="#案例讲解-2" class="headerlink" title="案例讲解"></a>案例讲解</h5></li>
</ol>
<p>在CRM系统中，客户(Customer)可以分为VIP客户(VIPCustomer)和普通客户(CommonCustomer)两类，系统需要提供一个发送Email的功能，原始设计方案如图所示：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/ls1.jpg" alt=""></p>
<p>在对系统进行进一步分析后发现，无论是普通客户还是VIP客户，发送邮件的过程都是相同的，也就是说两个send()方法中的代码重复，而且在本系统中还将增加新类型的客户。</p>
<p>为了让系统具有更好的扩展性，同时减少代码重复，使用里氏代换原则对其进行重构。</p>
<p>在本实例中，可以考虑增加一个新的抽象客户类Customer，而将CommonCustomer和VIPCustomer类作为其子类，邮件发送类EmailSender类针对抽象客户类Customer编程，根据里氏代换原则，能够接受基类对象的地方必然能够接受子类对象，因此将EmailSender中的send()方法的参数类型改为Customer，如果需要增加新类型的客户，只需将其作为Customer类的子类即可。<br>重构后的结构如图所示：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/ls2.jpg" alt=""></p>
<h4 id="依赖倒转原则-Dependence-Inversion-Principle—DIP"><a href="#依赖倒转原则-Dependence-Inversion-Principle—DIP" class="headerlink" title="依赖倒转原则(Dependence Inversion Principle—DIP)"></a>依赖倒转原则(Dependence Inversion Principle—DIP)</h4><p>定义：抽象不应该依赖于细节，细节应当依赖于抽象。换言之，要针对接口编程，而不是针对实现编程。</p>
<h4 id="接口隔离原则-Interface-Segregation-Principle—ISP"><a href="#接口隔离原则-Interface-Segregation-Principle—ISP" class="headerlink" title="接口隔离原则(Interface Segregation Principle—ISP)"></a>接口隔离原则(Interface Segregation Principle—ISP)</h4><p>定义：使用多个专门的接口，而不使用单一的总接口，即客户端不应该依赖那些它不需要的接口。</p>
<p>这里的“接口”往往有两种不同的含义：一种是指一个类型所具有的方法特征的集合，仅仅是一种逻辑上的抽象；另外一种是指某种语言具体的“接口”定义，有严格的定义和结构，比如Java语言中的interface。对于这两种不同的含义，ISP的表达方式以及含义都有所不同：</p>
<ol>
<li>当把“接口”理解成一个类型所提供的所有方法特征的集合的时候，这就是一种逻辑上的概念，接口的划分将直接带来类型的划分。可以把接口理解成角色，此时，这个原则可以叫做“角色隔离原则”。</li>
<li>如果把“接口”理解成狭义的特定语言的接口，在面向对象编程语言中，实现一个接口就需要实现该接口中定义的所有方法，因此大的总接口使用起来不一定很方便，为了使接口的职责单一，需要将大接口中的方法根据其职责不同分别放在不同的小接口中，以确保每个接口使用起来都较为方便，并都承担某一单一角色。<h5 id="案例讲解-3"><a href="#案例讲解-3" class="headerlink" title="案例讲解"></a>案例讲解</h5></li>
</ol>
<p>开发人员针对某CRM系统的客户数据显示模块设计了如图所示接口，其中方法dataRead()用于从文件中读取数据，方法transformToXML()用于将数据转换成XML格式，方法createChart()用于创建图表，方法displayChart()用于显示图表，方法createReport()用于创建文字报表，方法displayReport()用于显示文字报表。初始设计方案结构图:</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/is1.jpg" alt=""></p>
<p>在实际使用过程中发现该接口很不灵活，例如如果一个具体的数据显示类无须进行数据转换（源文件本身就是XML格式），但由于实现了该接口，将不得不实现其中声明的transformToXML()方法（至少需要提供一个空实现）；如果需要创建和显示图表，除了需实现与图表相关的方法外，还需要实现创建和显示文字报表的方法，否则程序编译时将报错。<br>由于在接口CustomerDataDisplay中定义了太多方法，一方面导致该接口的实现类很庞大，在不同的实现类中都不得不实现接口中定义的所有方法，灵活性较差，如果出现大量的空方法，将导致系统中产生大量的无用代码，影响代码质量；另一方面由于客户端针对大接口编程，将在一定程序上破坏程序的封装性，客户端看到了不应该看到的方法，没有为客户端定制接口。<br>将该接口按照接口隔离原则和单一职责原则进行重构，重构后的结构如图所示：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/is2.jpg" alt=""></p>
<h4 id="合成复用原则-Composite-Reuse-Principle—CRP"><a href="#合成复用原则-Composite-Reuse-Principle—CRP" class="headerlink" title="合成复用原则(Composite Reuse Principle—CRP)"></a>合成复用原则(Composite Reuse Principle—CRP)</h4><p>定义：尽量使用合成/聚合，尽量不要使用类继承</p>
<p>通过继承来进行复用的主要问题在于继承复用会破坏系统的封装性，因为继承会将基类的实现细节暴露给子类，由于基类的内部细节通常对子类来说是可见的，所以这种复用又称“白箱”复用，如果基类发生改变，那么子类的实现也不得不发生改变。</p>
<p>简言之：复用时要尽量使用组合/聚合关系（关联关系），少用继承</p>
<h5 id="案例讲解-4"><a href="#案例讲解-4" class="headerlink" title="案例讲解"></a>案例讲解</h5><p> 在初期的CRM系统设计中，考虑到客户数量不多，系统采用MySQL作为数据库，与数据库操作有关的类如CustomerDAO类等都需要连接数据库，连接数据库的方法getConnection()封装在DBUtil类中，由于需要重用DBUtil类的getConnection()方法，设计人员将CustomerDAO作为DBUtil类的子类，初始设计方案结构如图所示：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/cr1.jpg" alt=""></p>
<p>随着客户数量的增加，系统决定升级为Oracle数据库，因此需要增加一个新的OracleDBUtil类来连接Oracle数据库，由于在初始设计方案中CustomerDAO和DBUtil之间是继承关系，因此在更换数据库连接方式时需要修改CustomerDAO类的源代码，将CustomerDAO作为OracleDBUtil的子类，这将违反开闭原则。<br>根据合成复用原则，我们在实现复用时应该多用关联，少用继承,重构后的结构如图所示：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/cr2.jpg" alt=""></p>
<p>在上图中，CustomerDAO和DBUtil之间的关系由继承关系变为关联关系，采用依赖注入的方式将DBUtil对象注入到CustomerDAO中，可以使用构造注入，也可以使用Setter注入。如果需要对DBUtil的功能进行扩展，可以通过其子类来实现，如通过子类OracleDBUtil来连接Oracle数据库。由于CustomerDAO针对DBUtil编程，根据里氏代换原则，DBUtil子类的对象可以覆盖DBUtil对象，只需在CustomerDAO中注入子类对象即可使用子类所扩展的方法。例如在CustomerDAO中注入OracleDBUtil对象，即可实现Oracle数据库连接，原有代码无须进行修改，而且还可以很灵活地增加新的数据库连接方式。</p>
<h4 id="迪米特法则-Law-of-Demeter—LoD"><a href="#迪米特法则-Law-of-Demeter—LoD" class="headerlink" title="迪米特法则(Law of Demeter—LoD)"></a>迪米特法则(Law of Demeter—LoD)</h4><p>定义：一个软件实体应当尽可能少地与其他实体发生相互作用</p>
<p>通俗理解：如果两个对象之间不必彼此直接通信，那么这两个对象就不应当发生任何直接的相互作用，如果其中的一个对象需要调用另一个对象的某一个方法的话，可以通过第三者转发这个调用。简言之，就是通过引入一个合理的第三者来降低现有对象之间的耦合度。</p>
<h5 id="案例讲解-5"><a href="#案例讲解-5" class="headerlink" title="案例讲解"></a>案例讲解</h5><p> CRM系统包含很多业务操作窗口，在这些窗口中，某些界面控件之间存在复杂的交互关系，一个控件事件的触发将导致多个其他界面控件产生响应，例如，当一个按钮(Button)被单击时，对应的列表框(List)、组合框(ComboBox)、文本框(TextBox)、文本标签(Label)等都将发生改变，在初始设计方案中，界面控件之间的交互关系可简化为如图所示结构：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/LOD1.jpg" alt=""></p>
<p>在上图中，由于界面控件之间的交互关系复杂，导致在该窗口中增加新的界面控件时需要修改与之交互的其他控件的源代码，系统扩展性较差，也不便于增加和删除新控件。</p>
<p>通过引入一个专门用于控制界面控件交互的中间类(Mediator)来降低界面控件之间的耦合度。引入中间类之后，界面控件之间不再发生直接引用，而是将请求先转发给中间类，再由中间类来完成对其他控件的调用。当需要增加或删除新的控件时，只需修改中间类即可，无须修改新增控件或已有控件的源代码，重构后结构如图所示：</p>
<p><img src="http://7xotrj.com1.z0.glb.clouddn.com/LOD2.jpg" alt=""></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/其它/">其它</a>
</div>


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://StoryTeam.cn/2016/12/28/2016-12-28-设计模式（二）/" data-title="设计模式（二） | StoryTeam" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/12/30/2016-12-30-ios本地视频那些坑/" title="ios本地视频那些坑">
  <strong>上一篇</strong><br/>
  <span>
  ios本地视频那些坑</span>
</a>
</div>


<div class="next">
<a href="/2016/11/30/2016-11-30-最简单的拍摄原型研究/"  title="最简单的拍摄原型研究">
 <strong>下一篇</strong><br/> 
 <span>最简单的拍摄原型研究
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/12/28/2016-12-28-设计模式（二）/" data-title="设计模式（二）" data-url="http://StoryTeam.cn/2016/12/28/2016-12-28-设计模式（二）/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#导语"><span class="toc-number">1.</span> <span class="toc-text">导语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设计原则意义"><span class="toc-number">2.</span> <span class="toc-text">设计原则意义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七条设计原则"><span class="toc-number">3.</span> <span class="toc-text">七条设计原则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#单一职责原则-Single-Responsibility-Principle—SRP"><span class="toc-number">3.1.</span> <span class="toc-text">单一职责原则(Single Responsibility Principle—SRP)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#案例讲解"><span class="toc-number">3.1.1.</span> <span class="toc-text">案例讲解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#开放封闭原则-Open-Closed-Principle—OCP"><span class="toc-number">3.2.</span> <span class="toc-text">开放封闭原则(Open-Closed Principle—OCP)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#案例讲解-1"><span class="toc-number">3.2.1.</span> <span class="toc-text">案例讲解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#里氏代换原则-Liskov-Substitution-Principle—LSP"><span class="toc-number">3.3.</span> <span class="toc-text">里氏代换原则(Liskov Substitution Principle—LSP)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#案例讲解-2"><span class="toc-number">3.3.1.</span> <span class="toc-text">案例讲解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#依赖倒转原则-Dependence-Inversion-Principle—DIP"><span class="toc-number">3.4.</span> <span class="toc-text">依赖倒转原则(Dependence Inversion Principle—DIP)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#接口隔离原则-Interface-Segregation-Principle—ISP"><span class="toc-number">3.5.</span> <span class="toc-text">接口隔离原则(Interface Segregation Principle—ISP)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#案例讲解-3"><span class="toc-number">3.5.1.</span> <span class="toc-text">案例讲解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#合成复用原则-Composite-Reuse-Principle—CRP"><span class="toc-number">3.6.</span> <span class="toc-text">合成复用原则(Composite Reuse Principle—CRP)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#案例讲解-4"><span class="toc-number">3.6.1.</span> <span class="toc-text">案例讲解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#迪米特法则-Law-of-Demeter—LoD"><span class="toc-number">3.7.</span> <span class="toc-text">迪米特法则(Law of Demeter—LoD)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#案例讲解-5"><span class="toc-number">3.7.1.</span> <span class="toc-text">案例讲解</span></a></li></ol></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/其它/" title="其它">其它<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://developer.apple.com" target="_blank" title="官方开发者">官方开发者</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer>


<div id="footer" >
	
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/StoryTeam" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:SNG_StoryTeam@qq.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="StoryTeam">StoryTeam</a>
		
		</p>
</div>
<img src="/img/logo_new.jpg" style="position: fixed; top: -9999px;height: 500px;width: 500px;">
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script src="/js/mm.js"></script>
<script src="/js/subscribe.js"></script>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<script type="text/javascript">
$(document).ready(function(){

  

  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"StoryTeam"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 








<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->
<!--
	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>
-->
<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
